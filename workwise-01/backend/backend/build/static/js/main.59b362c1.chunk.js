(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{14:function(e,t,a){e.exports=a(25)},20:function(e,t,a){},25:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(13),c=a.n(r),s=(a(20),a(6)),o=a(3);const u=a(27).a.create({baseURL:"http://localhost:8000/api",headers:{"Content-Type":"application/json"}});var m=()=>{const[e,t]=Object(n.useState)(""),[a,r]=Object(n.useState)(""),[c,s]=Object(n.useState)(""),m=Object(o.p)();return l.a.createElement("div",null,l.a.createElement("h2",null,"Login"),c&&l.a.createElement("p",null,c),l.a.createElement("form",{onSubmit:async t=>{t.preventDefault();try{await(async(e,t)=>{const a=await u.post("/accounts/token/",{username:e,password:t});return localStorage.setItem("access",a.data.access),localStorage.setItem("refresh",a.data.refresh),a.data})(e,a),m("/dashboard")}catch(n){s("Login failed. Please check your credentials.")}}},l.a.createElement("input",{type:"text",placeholder:"Username",value:e,onChange:e=>t(e.target.value)}),l.a.createElement("input",{type:"password",placeholder:"Password",value:a,onChange:e=>r(e.target.value)}),l.a.createElement("button",{type:"submit"},"Login")))};var i=()=>{const[e,t]=Object(n.useState)(""),[a,r]=Object(n.useState)(""),[c,s]=Object(n.useState)(""),m=Object(o.p)();return l.a.createElement("div",null,l.a.createElement("h2",null,"Register"),c&&l.a.createElement("p",null,c),l.a.createElement("form",{onSubmit:async t=>{t.preventDefault();try{await(async(e,t)=>(await u.post("/accounts/register/",{username:e,password:t})).data)(e,a),m("/login")}catch(n){s("Registration failed. Username may already exist.")}}},l.a.createElement("input",{type:"text",placeholder:"Username",value:e,onChange:e=>t(e.target.value)}),l.a.createElement("input",{type:"password",placeholder:"Password",value:a,onChange:e=>r(e.target.value)}),l.a.createElement("button",{type:"submit"},"Register")))};var p=()=>{const[e,t]=Object(n.useState)(null);return Object(n.useEffect)(()=>{(async()=>{try{const e=await(async e=>(await u.get(`/accounts/users/${e}/`,{headers:{Authorization:"Bearer "+localStorage.getItem("access")}})).data)(1);t(e)}catch(e){console.error("Error fetching profile")}})()},[]),e?l.a.createElement("div",null,l.a.createElement("h2",null,"Welcome, ",e.username),l.a.createElement("p",null,"Email: ",e.email),l.a.createElement("p",null,"First Name: ",e.first_name),l.a.createElement("p",null,"Last Name: ",e.last_name)):l.a.createElement("p",null,"Loading...")};var E=()=>l.a.createElement(s.a,null,l.a.createElement("nav",null,l.a.createElement(s.b,{to:"/login"},"Login")," | ",l.a.createElement(s.b,{to:"/register"},"Register")),l.a.createElement(o.c,null,l.a.createElement(o.a,{path:"/login",element:l.a.createElement(m,null)}),l.a.createElement(o.a,{path:"/register",element:l.a.createElement(i,null)}),l.a.createElement(o.a,{path:"/dashboard",element:l.a.createElement(p,null)})));var d=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,28)).then(t=>{let{getCLS:a,getFID:n,getFCP:l,getLCP:r,getTTFB:c}=t;a(e),n(e),l(e),r(e),c(e)})};c.a.createRoot(document.getElementById("root")).render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(E,null))),d()}},[[14,1,2]]]);
//# sourceMappingURL=main.59b362c1.chunk.js.map